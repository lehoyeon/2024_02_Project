<!DOCTYPE HTML>
<!--
	Forty by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Ïû¨Î¨¥ ÌéòÏù¥ÏßÄ</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/management.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
        <div id="wrapper">

            <!-- Header -->
            <header id="header" class="alt">
                <a href="/main" class="logo"><strong>Monmi</strong> <span></span></a>
                <nav>
                    <a id="login-button" href="#login">Î°úÍ∑∏Ïù∏</a>
                    <a href="#menu">Î©îÎâ¥</a>
                </nav>
            </header>

            <!-- Menu -->
            <nav id="menu">
                <ul class="links">
                    <li><a href="/main">Î©îÏù∏ÌéòÏù¥ÏßÄ</a></li>
                    <li><a href="/production/production_process">Ï†úÌíà ÏÉùÏÇ∞ Í≥µÏ†ï</a></li>
                    <li><a href="/sales/correspondent_material_management">Í±∞ÎûòÏ≤ò Í¥ÄÎ¶¨</a></li>
                    <li><a href="/notice">Í≥µÏßÄÏÇ¨Ìï≠</a></li>
                    <li><a href="/sales_management">Ïû¨Î¨¥</a></li>
                </ul>
                <ul class="actions stacked">
                    <li><a href="/accession" class="button primary join">ÌöåÏõêÍ∞ÄÏûÖ</a></li>
                </ul>
            </nav>
            <!-- login -->
            <nav id="login">
                <ul class="links">
                    <form action="/login" method="post"><!-- ÏÑúÎ≤ÑÎ°ú post ÏöîÏ≤≠ -->
                        <h4 class="login_logo"><strong>Monmi</strong></h4>
                        <br>
                        <li>Î°úÍ∑∏Ïù∏<input type="text" name="monami_id" required></li> 				<!--nameÏù¥ Î™®ÎÇòÎØ∏_ÏïÑÏù¥ÎîîÎ°ú Ï†ÑÏÜ° -->
                        <li>ÎπÑÎ∞ÄÎ≤àÌò∏<input type="text" name="monami_password" required></li> 	<!--nameÏù¥ Î™®ÎÇòÎØ∏_ÎπÑÎ≤àÏúºÎ°ú Ï†ÑÏÜ° -->
                        <!-- required = ÏÇ¨Ïö©ÏûêÍ∞Ä ÎπàÍ∞íÏúºÎ°ú Ï†úÏ∂úÌïòÎäîÍ±∞ Î∞©ÏßÄ -->
                        <br>
                        <li><button >Î°úÍ∑∏Ïù∏</button></li>
                        <br>
                    </form>
                </ul>
            </nav>
            <section id="banner" class="style2">
                <div class="inner">
							<span class="image">
								<img src="/images/pic07.jpg" alt="" />
							</span>
                    <header class="major">
                        <h1>Ïû¨Î¨¥ Îç∞Ïù¥ÌÑ∞,Ï∞®Ìä∏</h1>
                    </header>
                    <div class="content">
                        <p>Ïû¨Î¨¥ÌåÄ ÌôòÏòÅÏù∏ÏÇ¨<br />
                            Ïò§ÎäòÎèÑ Ï¶êÍ±∞Ïö¥ ÌïòÎ£® Î≥¥ÎÇ¥ÏÑ∏Ïöî!</p>
                    </div>
                </div>
            </section>

            <!-- login -->
            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    handleUrlParams(); 	// URL ÌååÎùºÎØ∏ÌÑ∞ Ï≤òÎ¶¨ (Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ/Ïã§Ìå® Î©îÏãúÏßÄ)
                    checkLoginStatus(); // Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú ÌôïÏù∏
                });

                function handleUrlParams() {
                    const urlParams = new URLSearchParams(window.location.search);

                    if (urlParams.has("error")) {
                        alert("Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. ÏïÑÏù¥ÎîîÏôÄ ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÌôïÏù∏ÌïòÏÑ∏Ïöî.");
                        history.replaceState({}, null, window.location.pathname);
                    }
                    else if (urlParams.has("success")) {
                        alert("Ïñ¥ÏÑúÏò§ÏÑ∏Ïöî! Î°úÍ∑∏Ïù∏Ïóê ÏÑ±Í≥µÌïòÏÖ®ÏäµÎãàÎã§.");
                        history.replaceState({}, null, window.location.pathname);
                    }
                }

                // üîπ Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú ÌôïÏù∏ Î∞è Î≤ÑÌäº Î≥ÄÍ≤Ω
                function checkLoginStatus() {
                    const loginButton = document.getElementById('login-button');

                    fetch('/check', { credentials: 'include' }) // ÏÑúÎ≤ÑÏóêÏÑú Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú ÌôïÏù∏ ÏöîÏ≤≠
                        .then(response => response.json())
                        .then(data => {
                            const isLoggedIn = data.isLoggedIn; // JSONÏóêÏÑú Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú Í∞ÄÏ†∏Ïò§Í∏∞
                            if (isLoggedIn) {
                                loginButton.textContent = 'Î°úÍ∑∏ÏïÑÏõÉ';
                                loginButton.removeAttribute('href'); // href Ï†úÍ±∞
                                loginButton.onclick = function () {
                                    handleLogout();
                                };
                            } else {
                                updateToLoginButton(loginButton);
                            }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            updateToLoginButton(loginButton);
                        });
                }

                // üîπ Î°úÍ∑∏ÏïÑÏõÉ Ï≤òÎ¶¨
                function handleLogout() {
                    fetch('/logout', { credentials: 'include' }) // Î°úÍ∑∏ÏïÑÏõÉ ÏöîÏ≤≠
                        .then(() => {
                            alert('Î°úÍ∑∏ÏïÑÏõÉÎêòÏóàÏäµÎãàÎã§.');
                            window.location.reload(); // Î°úÍ∑∏ÏïÑÏõÉ ÌõÑ ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ®ÌïòÏó¨ Î∞òÏòÅ
                        })
                        .catch(error => console.error('Error:', error));
                }

                // üîπ Î°úÍ∑∏Ïù∏ Î≤ÑÌäº ÏÉÅÌÉúÎ°ú ÏóÖÎç∞Ïù¥Ìä∏
                function updateToLoginButton(loginButton) {
                    loginButton.textContent = 'Î°úÍ∑∏Ïù∏';
                    loginButton.setAttribute('href', '#login');
                    loginButton.onclick = null;
                }
            </script>

            <!-- Main -->
                <div id="main" class="alt">

                    <!-- One -->
                    <section id="one">
                        <div class="inner">
                            <header class="major">
                                <h1>Îß§Ï∂ú,Ïù¥Ïùµ Ï∞®Ìä∏</h1>
                            </header>
                            <div class="chart_box">
                                <div class="col-lg-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Ïàú Îß§Ï∂ú Ï∞®Ìä∏</h5>

                                            <!-- Area Chart -->
                                            <div id="areaChart" class="chart"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Ïàú Ïù¥Ïùµ Ï∞®Ìä∏</h5>

                                            <!-- Column Chart -->
                                            <div id="columnChart" class="chart"></div>
                                        </div>
                                    </div>
                                </div>
                                <!-- üìå JSON Îç∞Ïù¥ÌÑ∞Î•º HTML ÏÜçÏÑ±(data-json)Ïóê Ï†ÄÏû• -->
                                <p id="monthlyRevenueData" th:attr="data-json=${monthlyRevenue}"></p>
                                <p id="monthlyProfitData" th:attr="data-json=${monthlyProfit}"></p>






                                <script>
                                    // üîπ ÏòÅÏñ¥ ÏõîÏùÑ ÌïúÍ∏ÄÎ°ú Î≥ÄÌôòÌïòÎäî Ìï®Ïàò
                                    function convertToKoreanMonth(englishMonth) {
                                    const monthMap = {
                                        "JANUARY": "1Ïõî",
                                        "FEBRUARY": "2Ïõî",
                                        "MARCH": "3Ïõî",
                                        "APRIL": "4Ïõî",
                                        "MAY": "5Ïõî",
                                        "JUNE": "6Ïõî",
                                        "JULY": "7Ïõî",
                                        "AUGUST": "8Ïõî",
                                        "SEPTEMBER": "9Ïõî",
                                        "OCTOBER": "10Ïõî",
                                        "NOVEMBER": "11Ïõî",
                                        "DECEMBER": "12Ïõî"
                                    };
                                    return monthMap[englishMonth] || englishMonth; // Î≥ÄÌôòÎêú Í∞í Î∞òÌôò
                                    }



                                    document.addEventListener("DOMContentLoaded", () => {
                                        // ‚úÖ HTML ÏÜçÏÑ±ÏóêÏÑú Îç∞Ïù¥ÌÑ∞ ÏùΩÍ∏∞
                                        const monthlyRevenueJson = document.getElementById("monthlyRevenueData").getAttribute("data-json");
                                        const monthlyProfitJson = document.getElementById("monthlyProfitData").getAttribute("data-json");

                                        // ‚úÖ JSON Î¨∏ÏûêÏó¥ÏùÑ JavaScript Í∞ùÏ≤¥Î°ú Î≥ÄÌôò
                                        let fixedRevenueJson = monthlyRevenueJson.replace(/=/g, ':').replace(/(\w+):/g, '"$1":');
                                        let fixedProfitJson = monthlyProfitJson.replace(/=/g, ':').replace(/(\w+):/g, '"$1":');

                                        const monthlyRevenue = JSON.parse(fixedRevenueJson);
                                        const monthlyProfit = JSON.parse(fixedProfitJson);

                                        const months = Object.keys(monthlyRevenue).map(convertToKoreanMonth);
                                        const revenues = Object.values(monthlyRevenue);
                                        const profits = Object.values(monthlyProfit)

                                        // ‚úÖ Í∏∞Ï°¥ Area Chart ÏàòÏ†ï (ÏàúÎß§Ï∂ú Îç∞Ïù¥ÌÑ∞)
                                        new ApexCharts(document.querySelector("#areaChart"), {
                                        series: [{
                                            name: "ÏàúÎß§Ï∂ú",
                                            data: revenues
                                        }],
                                        chart: {
                                            type: 'area',
                                            height: 350,
                                            zoom: { enabled: false }
                                        },
                                        dataLabels: { enabled: false },
                                        stroke: { curve: 'smooth' },
                                        subtitle: { text: '', align: 'left' },
                                        labels: months, // ‚úÖ XÏ∂ïÏùÑ ÏõîÎ≥ÑÎ°ú ÏÑ§Ï†ï
                                        xaxis: {
                                            type: 'category'
                                        },
                                        yaxis: {
                                            opposite: true,
                                            labels: {  // ‚úÖ YÏ∂ïÏóêÎèÑ ÏõêÌôî Í∏∞Ìò∏ Ï∂îÍ∞Ä
                                                formatter: function(val) {
                                                    return " " + val.toLocaleString();
                                                }
                                            }
                                        },
                                        legend: { horizontalAlign: 'left' },
                                        tooltip: {  // ‚úÖ Ìà¥ÌåÅÏóêÏÑú `$`Í∞Ä ÏïÑÎãå `‚Ç©`Ïù¥ ÌëúÏãúÎêòÎèÑÎ°ù ÏàòÏ†ï
                                            y: {
                                                formatter: function(val) {
                                                    return val.toLocaleString() + " Ïõê";  // ‚úÖ ÏõêÌôî Í∏∞Ìò∏Î°ú ÌôïÏã§ÌïòÍ≤å ÏÑ§Ï†ï
                                                }
                                            }
                                        }
                                    }).render();


                                        // ‚úÖ Í∏∞Ï°¥ Column Chart ÏàòÏ†ï (ÏàúÏù¥Ïùµ Îç∞Ïù¥ÌÑ∞)
                                        new ApexCharts(document.querySelector("#columnChart"), {
                                            series: [{
                                                name: "ÏàúÏù¥Ïùµ",
                                                data: profits
                                            }],
                                            chart: {
                                                type: 'bar',
                                                height: 350
                                            },
                                            plotOptions: {
                                                bar: {
                                                    horizontal: false,
                                                    columnWidth: '55%',
                                                    endingShape: 'rounded'
                                                }
                                            },
                                            dataLabels: { enabled: false },
                                            stroke: { show: true, width: 2, colors: ['transparent'] },
                                            xaxis: { categories: months },
                                            yaxis: {
                                                title: { text: ' ' },
                                                opposite: true,  // ‚úÖ YÏ∂ï Î†àÏù¥Î∏îÏùÑ Ïò§Î•∏Ï™ΩÏúºÎ°ú Ïù¥Îèô
                                                labels: {
                                                    formatter: function(val) {
                                                        return " " + val.toLocaleString();
                                                    }
                                                }
                                            },
                                            fill: { opacity: 1 },
                                            tooltip: {
                                                y: {
                                                    formatter: function(val) {
                                                        return val.toLocaleString() + " Ïõê";
                                                    }
                                                }
                                            }
                                        }).render();
                                    });
                                </script>
                            </div>



                            <h1>Ïû¨Î¨¥ Îç∞Ïù¥ÌÑ∞</h1>

                            <table>
                                <thead>
                                <tr>
                                    <th>Ï¥ù Îß§Ï∂ú</th>
                                    <th>Ï¥ù ÏõêÍ∞Ä</th>
                                    <th>Ïàú Ïù¥Ïùµ</th>
                                    <th>ÎÇ† Ïßú</th>
                                </tr>
                                </thead>
                                <tbody>
                                    <!-- üîπ DBÏóêÏÑú Í∞ÄÏ†∏Ïò® Îç∞Ïù¥ÌÑ∞Î•º Î∞òÎ≥µÎ¨∏ÏúºÎ°ú Ï∂úÎ†• -->
                                <tbody>
                                    <tr th:each="data : ${financialData}">
                                        <td th:text="${#numbers.formatInteger(data.totalRevenue, 3, 'COMMA')}"></td>
                                        <td th:text="${#numbers.formatInteger(data.totalCost, 3, 'COMMA')}"></td>
                                        <td th:text="${#numbers.formatInteger(data.netProfit, 3, 'COMMA')}"></td>
                                        <td th:text="${#temporals.format(data.recordDate, 'yyyy-MM-dd')}"></td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò UI -->
                            <div class="pagination">
                                <a th:if="${currentPage > 0}" th:href="@{/sales_management(page=${currentPage - 1})}">¬´ Ïù¥Ï†Ñ</a>
                                <span th:text="'ÌòÑÏû¨ ' + (${currentPage + 1}) + 'ÌéòÏù¥ÏßÄ / Ï¥ù ' + ${totalPages} + 'ÌéòÏù¥ÏßÄ'"></span>
                                <a th:if="${currentPage + 1 < totalPages}" th:href="@{/sales_management(page=${currentPage + 1})}">Îã§Ïùå ¬ª</a>
                            </div>
                        </div>
                </section>

                </div>


                        <!-- Contact -->
                            <section id="contact">
                                <div class="inner">
                                    <section class="split">
                                        <section>
                                            <div class="contact-method">
                                                <span class="icon solid alt fa-envelope"></span>
                                                <h3>Ïù¥Î©îÏùº</h3>
                                                <span>Monmi@gmail.com</span>
                                            </div>
                                        </section>
                                        <section>
                                            <div class="contact-method">
                                                <span class="icon solid alt fa-phone"></span>
                                                <h3>Ï†ÑÌôîÎ≤àÌò∏</h3>
                                                <span>(031) 249-4678 </span>
                                            </div>
                                        </section>
                                        <section>
                                            <div class="contact-method">
                                                <span class="icon solid alt fa-home"></span>
                                                <h3>Ï£ºÏÜå</h3>
                                                <span>Í≤ΩÍ∏∞ÎèÑ ÏàòÏõêÏãú ÌåîÎã¨Íµ¨ Í∂åÍ¥ëÎ°ú 187, 4Ï∏µ<br/>Monmi</span>
                                            </div>
                                        </section>
                                    </section>
                                </div>
                            </section>

                        <!-- Footer -->
                            <footer id="footer">
                                <div class="inner">
                                    <ul class="icons">
                                        <li><a href="#" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
                                        <li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
                                        <li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
                                        <li><a href="#" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
                                        <li><a href="#" class="icon brands alt fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
                                    </ul>
                                </div>
                            </footer>

                    </div>

                        <!-- Scripts -->
        <script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/jquery.scrolly.min.js"></script>
        <script src="assets/js/jquery.scrollex.min.js"></script>
        <script src="assets/js/browser.min.js"></script>
        <script src="assets/js/breakpoints.min.js"></script>
        <script src="assets/js/util.js"></script>
        <script src="assets/js/main.js"></script>

        <!-- Vendor JS Files -->
        <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
        <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="assets/vendor/chart.js/chart.umd.js"></script>
        <script src="assets/vendor/echarts/echarts.min.js"></script>
        <script src="assets/vendor/quill/quill.js"></script>
        <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
        <script src="assets/vendor/tinymce/tinymce.min.js"></script>
        <script src="assets/vendor/php-email-form/validate.js"></script>



	</body>
</html>
<!DOCTYPE HTML>
<html>
<head>
    <title>공지사항 페이지</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/assets/css/main.css" />
    <noscript><link rel="stylesheet" href="/assets/css/noscript.css" /></noscript>
    <link rel="stylesheet" href="assets/css/notice.css">
</head>
<body class="is-preload">

<!-- Wrapper -->

<!-- Header -->

<!-- Menu -->

<!-- Banner -->

<!-- Main -->
<div class="container">
    <div class="box-wrapper">
        <div class="header">
            <div class="left-box">
                <!-- 첫 번째 중요 공지 -->
                <div class="pen_box1" th:if="${#lists.size(importantNotices) > 0}">
                    <a th:href="@{/notice/{id}(id=${importantNotices[0].id})}">
                        <img src="/images/pen1.png" alt="이미지1">
                    </a>
                    <p th:text="${importantNotices[0].title}"></p>
                    <p th:text="${importantNotices[0].author}"></p>
                </div>

                <!-- 두 번째 중요 공지 -->
                <div class="pen_box2" th:if="${#lists.size(importantNotices) > 1}">
                    <a th:href="@{/notice/{id}(id=${importantNotices[1].id})}">
                        <img src="/images/pen2.png" alt="이미지2">
                    </a>
                    <p th:text="${importantNotices[1].title}"></p>
                    <p th:text="${importantNotices[1].author}"></p>
                </div>

                <!-- 세 번째 중요 공지 -->
                <div class="pen_box3" th:if="${#lists.size(importantNotices) > 2}">
                    <a th:href="@{/notice/{id}(id=${importantNotices[2].id})}">
                        <img src="/images/pen3.png" alt="이미지3">
                    </a>
                    <p th:text="${importantNotices[2].title}"></p>
                    <p th:text="${importantNotices[2].author}"></p>
                </div>

                <!-- 중요공지 3개 미만일 때 텍스트 출력 -->
                <p th:if="${#lists.size(importantNotices) == 2}" class="missing-one">현재 중요한 공지가 1개가 부족합니다.</p>
                <p th:if="${#lists.size(importantNotices) == 1}" class="missing-two">현재 중요한 공지가 2개가 부족합니다.</p>
                <p th:if="${#lists.size(importantNotices) == 0}" class="missing-none">현재 중요한 공지가 없습니다.</p>
            </div>

        </div>

        <!-- 새 공지사항 생성 버튼을 공지사항 목록 위로 이동 -->
        <a href="/notice/create" class="create-btn">새 공지사항 생성</a>

        <!-- 공지사항 목록 출력 -->
        <div class="notice-board">
            <!-- 스크롤 업 버튼 -->
            <div id="scroll-up" class="triangle"></div>

            <div th:each="notice : ${regularNotices}">
            <div class="notice-item">
                <div class="notice-content">
                    <div class="title-row">
                        <a class="title" th:href="@{'/notice/' + ${notice.id}}" th:text="${notice.title}"></a>
                        <span class="author-info">
                        <span th:text="${notice.author}"></span>
                        <span th:text="${notice.name}"></span>
                        <span th:text="${notice.position}"></span>
                    </span>
                    </div>
                    <div class="date-row">
                        <span class="date" th:text="${#temporals.format(notice.createdAt, 'yyyy-MM-dd HH:mm')}"></span>
                        <!-- 수정된 경우 '수정하였습니다' 표시 -->
                        <span th:if="${notice.updatedAt != null}" class="modified-at">
                        (수정하였습니다:
                        <span th:text="${#temporals.format(notice.updatedAt, 'yyyy-MM-dd HH:mm')}"></span>)
                    </span>
                    </div>
                        <!-- 중요공지 여부 확인 -->
                        <span th:if="${notice.important}" class="important-badge">중요공지 사항</span>

                        <div class="notice-actions">
                            <a th:href="@{/notice/{id}/edit(id=${notice.id})}" class="edit-btn">수정</a>
                            <a th:href="@{/notice/{id}/delete(id=${notice.id})}" class="delete-btn">삭제</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 스크롤 다운 버튼 -->
            <div id="scroll-down" class="reverse-triangle"></div>
        </div>

    </div>
</div>

<!-- Contact -->


<!-- Footer -->



<!-- 스크롤 버튼 기능 -->
<script>
    // 상단 삼각형 클릭 시 위로 스크롤
document.getElementById('scroll-up').addEventListener('click', function() {
  document.querySelector('.notice-board').scrollBy({
    top: -200, // 스크롤을 위로 200px 이동
    behavior: 'smooth' // 부드럽게 스크롤
  });
});

// 하단 역삼각형 클릭 시 아래로 스크롤
document.getElementById('scroll-down').addEventListener('click', function() {
  document.querySelector('.notice-board').scrollBy({
    top: 200, // 스크롤을 아래로 200px 이동
    behavior: 'smooth' // 부드럽게 스크롤
  });
});

// 더블클릭 시 맨 위로 이동
document.getElementById('scroll-up').addEventListener('dblclick', function() {
  document.querySelector('.notice-board').scrollTo({
    top: 0,
    behavior: 'smooth' // 부드럽게 스크롤
  });
});

// 더블클릭 시 맨 아래로 이동
document.getElementById('scroll-down').addEventListener('dblclick', function() {
  document.querySelector('.notice-board').scrollTo({
    top: document.querySelector('.notice-board').scrollHeight,
    behavior: 'smooth' // 부드럽게 스크롤
  });
});
</script>

</body>
</html>

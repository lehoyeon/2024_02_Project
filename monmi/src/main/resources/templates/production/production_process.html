<!DOCTYPE HTML>
<!--
	Forty by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <title>제품 생산 공정</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/assets/css/main.css" />
    <noscript><link rel="stylesheet" href="/assets/css/noscript.css" /></noscript>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
        #banner {
            height: 25vh;
        }

        .content-left {
            width: 30%;
        }

        .content-right {
            width: 50%;
        }

        .dived-content-box {
            width: 100%;
            display: flex;
            gap: 4em;
            justify-content: space-evenly;
        }

        .apexcharts-legend-text {
          color: #ffffff !important;
        }


    </style>
</head>
<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">

    <!-- Header -->
    <!-- Note: The "styleN" class below should match that of the banner element. -->
    <header id="header" class="alt style2">
        <a href="/main" class="logo"><strong>메인 페이지</strong></a>
        <nav>
            <a id="login-button" href="#login">로그인</a>
            <a href="#menu">메뉴</a>
        </nav>
    </header>

    <!-- Menu -->
    <nav id="menu">
        <ul class="links">
            <li><a href="/main">메인페이지</a></li>
            <li><a href="/production/production_process">제품 생산 공정</a></li>
            <li><a href="/sales/correspondent_material_management">거래처 관리</a></li>
            <li><a href="/notice">공지사항</a></li>
            <li><a href="/sales_management">재무?</a></li>
        </ul>
        <ul class="actions stacked">
            <li><a href="/accession" class="button primary join">회원가입</a></li>
        </ul>
    </nav>

    <!-- Banner -->
    <!-- Note: The "styleN" class below should match that of the header element. -->
    <section id="banner" class="style2">
        <div class="inner">
							<span class="image">
								<img src="/images/pic07.jpg" alt="" />
							</span>
            <header class="major">
                <h1>제품 생산 공정</h1>
            </header>
            <div class="content">
                <p>이용자 환영인사<br />
                    오늘도 힘찬 하루 보내세요!</p>
            </div>
        </div>
    </section>
    <!-- login -->
    <nav id="login">
        <ul class="links">
            <form action="/login" method="post"><!-- 서버로 post 요청 -->
                <h4 class="login_logo"><strong>Forty by HTML5 UP</strong></h4>
                <br>
                <li>ID<input type="text" name="monami_id" required></li> <!--name이 모나미_아이디로 전송 -->
                <li>PassWord<input type="text" name="monami_password" required></li> <!--name이 모나미_비번으로 전송 -->
                <!-- required = 사용자가 빈값으로 제출하는거 방지 -->
                <br>
                <li><button >Login</button></li>
                <br>
            </form>
        </ul>
    </nav>
    <!-- Main -->
    <div id="main">

        <!-- One -->
        <section id="contect">
            <div class="inner dived-content-box">
                <section class="content-left">
                    <div class="process-content">
                        <div class="inner">
                            <header class="major">
                                <h3>원자재 현황</h3>
                            </header>
                        </div>

                        <!-- Column Chart -->
                        <div id="columnChart"></div>

                        <script>
                            document.addEventListener("DOMContentLoaded", () => {
                              new ApexCharts(document.querySelector("#columnChart"), {
                                series: [{
                                  name: 'Net Profit',
                                  data: [44, 55, 57, 56, 61, 58, 63, 60, 66]
                                }, {
                                  name: 'Revenue',
                                  data: [76, 85, 101, 98, 87, 105, 91, 114, 94]
                                }, {
                                  name: 'Free Cash Flow',
                                  data: [35, 41, 36, 26, 45, 48, 52, 53, 41]
                                }],
                                chart: {
                                  type: 'bar',
                                  height: 350
                                },
                                plotOptions: {
                                  bar: {
                                    horizontal: false,
                                    columnWidth: '55%',
                                    endingShape: 'rounded'
                                  },
                                },
                                dataLabels: {
                                  enabled: false
                                },
                                stroke: {
                                  show: true,
                                  width: 2,
                                  colors: ['transparent']
                                },
                                xaxis: {
                                  categories: ['Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct'],
                                  labels: { style: { colors: "#ffffff" } },
                                  title: { style: { colors: "#ffffff" } },
                                },
                                yaxis: {
                                  labels: { style: { colors: "#ffffff" } },
                                  title: {
                                    text: '$ (thousands)',
                                    style: { color: "#ffffff" },
                                  },
                                },
                                fill: {
                                  opacity: 1
                                },
                                tooltip: {
                                  theme: "dark",
                                  style: {
                                    colors: ["#ffffff"]
                                  },
                                  y: {
                                    formatter: function(val) {
                                      return "$ " + val + " thousands"
                                    }
                                  }
                                }
                              }).render();
                            });
                        </script>
                        <!-- End Column Chart -->


                    </div>
                </section>

                <section class="content-right">
                    <div class="process-content">
                        <div class="dived-content-box">
                            <div>
                                <header class="major">
                                    <h3>생산품 현황</h3>
                                </header>

                                현재 생산량<br>
                                목표 생산량<br>
                                불량품 비율<br>
                                일일 생산량<br>

                            </div>

                            <!-- Line Chart -->
                            <div id="lineChart"></div>

                            <script>
                                document.addEventListener("DOMContentLoaded", () => {
                                  new ApexCharts(document.querySelector("#lineChart"), {
                                    series: [{
                                      name: "Desktops",
                                      data: [10, 41, 35, 51, 49, 62, 69, 91, 148]
                                    }, {
                                      name: "Labtops",
                                      data: [15, 48, 77, 21, 60, 31, 24, 88, 103]
                                    }, {
                                      name: "Phones",
                                      data: [33, 70, 120, 75, 88, 92, 103, 173, 201]
                                    }],
                                    chart: {
                                      height: 500,
                                      width: 400,
                                      type: 'line',
                                      zoom: {
                                        enabled: false
                                      }
                                    },
                                    dataLabels: {
                                      enabled: false
                                    },
                                    stroke: {
                                      curve: 'straight'
                                    },
                                    grid: {
                                      row: {
                                        colors: ['#f3f3f3', 'transparent'], // takes an array which will be repeated on columns
                                        opacity: 0.5
                                      },
                                    },
                                    xaxis: {
                                      categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
                                      labels: { style: { colors: "#ffffff" } },
                                      title: { style: { colors: "#ffffff" } },
                                    },
                                    yaxis: {
                                      labels: { style: { colors: "#ffffff" } },
                                      title: { style: { colors: "#ffffff" } },
                                    },
                                    legend: {
                                      labels: { colors: "#ffffff" }
                                    },
                                    tooltip: {
                                      theme: "dark",
                                      style: {
                                        colors: ["#ffffff"]
                                      }
                                    }
                                  }).render();
                                });
                            </script>
                            <!-- End Line Chart -->
                        </div>

                    </div>
                </section>
            </div>
        </section>

        <!-- Two -->
        <section id="two" class="spotlights">
            <section>
                <a href="/generic.html" class="image">
                    <img src="/images/pic08.jpg" alt="" data-position="center center" />
                </a>
                <div class="content">
                    <div class="inner">
                        <header class="major">
                            <h3>Orci maecenas</h3>
                        </header>
                        <p>Nullam et orci eu lorem consequat tincidunt vivamus et sagittis magna sed nunc rhoncus condimentum sem. In efficitur ligula tate urna. Maecenas massa sed magna lacinia magna pellentesque lorem ipsum dolor. Nullam et orci eu lorem consequat tincidunt. Vivamus et sagittis tempus.</p>
                        <ul class="actions">
                            <li><a href="/generic.html" class="button">Learn more</a></li>
                        </ul>
                    </div>
                </div>
            </section>
            <section>
                <a href="/generic.html" class="image">
                    <img src="/images/pic09.jpg" alt="" data-position="top center" />
                </a>
                <div class="content">
                    <div class="inner">
                        <header class="major">
                            <h3>Rhoncus magna</h3>
                        </header>
                        <p>Nullam et orci eu lorem consequat tincidunt vivamus et sagittis magna sed nunc rhoncus condimentum sem. In efficitur ligula tate urna. Maecenas massa sed magna lacinia magna pellentesque lorem ipsum dolor. Nullam et orci eu lorem consequat tincidunt. Vivamus et sagittis tempus.</p>
                        <ul class="actions">
                            <li><a href="generic.html" class="button">Learn more</a></li>
                        </ul>
                    </div>
                </div>
            </section>
            <section>
                <a href="/generic.html" class="image">
                    <img src="/images/pic10.jpg" alt="" data-position="25% 25%" />
                </a>
                <div class="content">
                    <div class="inner">
                        <header class="major">
                            <h3>Sed nunc ligula</h3>
                        </header>
                        <p>Nullam et orci eu lorem consequat tincidunt vivamus et sagittis magna sed nunc rhoncus condimentum sem. In efficitur ligula tate urna. Maecenas massa sed magna lacinia magna pellentesque lorem ipsum dolor. Nullam et orci eu lorem consequat tincidunt. Vivamus et sagittis tempus.</p>
                        <ul class="actions">
                            <li><a href="/generic.html" class="button">Learn more</a></li>
                        </ul>
                    </div>
                </div>
            </section>
        </section>

        <!-- Three -->
        <section id="three">
            <div class="inner">
                <header class="major">
                    <h2>Massa libero</h2>
                </header>
                <p>Nullam et orci eu lorem consequat tincidunt vivamus et sagittis libero. Mauris aliquet magna magna sed nunc rhoncus pharetra. Pellentesque condimentum sem. In efficitur ligula tate urna. Maecenas laoreet massa vel lacinia pellentesque lorem ipsum dolor. Nullam et orci eu lorem consequat tincidunt. Vivamus et sagittis libero. Mauris aliquet magna magna sed nunc rhoncus amet pharetra et feugiat tempus.</p>
                <ul class="actions">
                    <li><a href="generic.html" class="button next">Get Started</a></li>
                </ul>
            </div>
        </section>

    </div>

    <!-- Contact -->
    <section id="contact">
        <div class="inner">
            <section>
                <form method="post" action="#">
                    <div class="fields">
                        <div class="field half">
                            <label for="name">Name</label>
                            <input type="text" name="name" id="name" />
                        </div>
                        <div class="field half">
                            <label for="email">Email</label>
                            <input type="text" name="email" id="email" />
                        </div>
                        <div class="field">
                            <label for="message">Message</label>
                            <textarea name="message" id="message" rows="6"></textarea>
                        </div>
                    </div>
                    <ul class="actions">
                        <li><input type="submit" value="Send Message" class="primary" /></li>
                        <li><input type="reset" value="Clear" /></li>
                    </ul>
                </form>
            </section>
            <section class="split">
                <section>
                    <div class="contact-method">
                        <span class="icon solid alt fa-envelope"></span>
                        <h3>Email</h3>
                        <a href="#">information@untitled.tld</a>
                    </div>
                </section>
                <section>
                    <div class="contact-method">
                        <span class="icon solid alt fa-phone"></span>
                        <h3>Phone</h3>
                        <span>(000) 000-0000 x12387</span>
                    </div>
                </section>
                <section>
                    <div class="contact-method">
                        <span class="icon solid alt fa-home"></span>
                        <h3>Address</h3>
                        <span>1234 Somewhere Road #5432<br />
										Nashville, TN 00000<br />
										United States of America</span>
                    </div>
                </section>
            </section>
        </div>
    </section>

    <!-- Footer -->
    <footer id="footer">
        <div class="inner">
            <ul class="icons">
                <li><a href="#" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
                <li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
                <li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
                <li><a href="#" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
                <li><a href="#" class="icon brands alt fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
            </ul>
            <ul class="copyright">
                <li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
            </ul>
        </div>
    </footer>

</div>

<!-- Scripts -->
<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/jquery.scrolly.min.js"></script>
<script src="/assets/js/jquery.scrollex.min.js"></script>
<script src="/assets/js/browser.min.js"></script>
<script src="/assets/js/breakpoints.min.js"></script>
<script src="/assets/js/util.js"></script>
<script src="/assets/js/main.js"></script>
<script>
    window.onload = function () {
    handleUrlParams(); 	// URL 파라미터 처리
    checkLoginStatus(); // 로그인 상태 확인
    };

    // URL 파라미터 처리
    function handleUrlParams() {
    const urlParams = new URLSearchParams(window.location.search);

    // 로그인 실패 처리
    if (urlParams.has("error")) {
        alert("로그인에 실패했습니다. 아이디와 비밀번호를 확인하세요.");
        // URL에서 error 파라미터 제거
        history.replaceState({}, null, window.location.pathname);
    }
    else if (urlParams.has("success")) { // 로그인 성공 처리
        alert("어서오세요! 로그인에 성공하셨습니다.");
        // URL에서 success 파라미터 제거
        history.replaceState({}, null, window.location.pathname);
        }
    }

    // 로그인 상태 확인
    function checkLoginStatus() {
    const loginButton = document.getElementById('login-button');

    // 로그인 상태 확인 API 호출
    fetch('/check', { credentials: 'include' })
        .then(response => response.json())
        .then(data => {
            const isLoggedIn = data.isLoggedIn; // JSON에서 로그인 상태 가져오기
            if (isLoggedIn) {
                loginButton.textContent = '로그아웃';
                loginButton.removeAttribute('href'); // href 제거
                loginButton.onclick = function () {
                    handleLogout(); //  로그아웃 처리 호출
                };
            } else {
                updateToLoginButton(loginButton); //  로그인 버튼으로 변경
            }
        })
        .catch(error => {
            console.error('Error:', error);
            updateToLoginButton(loginButton); // 에러 발생 시에도 로그인 버튼으로 변경
        });
    }

    // 로그아웃 처리
    function handleLogout() {
    fetch('/logout', { credentials: 'include' }) // 로그아웃 요청
        .then(() => {
            alert('로그아웃되었습니다.');
            checkLoginStatus(); 					   //로그아웃 후 상태 갱신
        })
        .catch(error => console.error('Error:', error));
    }

    // 로그인 버튼 상태로 업데이트
    function updateToLoginButton(loginButton) {
    loginButton.textContent = '로그인';
    loginButton.setAttribute('href', '#login');
    loginButton.onclick = null;
    }

</script>
</body>
</html>